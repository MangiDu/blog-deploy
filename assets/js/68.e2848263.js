(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{628:function(e,r,t){"use strict";t.r(r);var o=t(6),s=Object(o.a)({},(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("ul",[t("li",[t("a",{attrs:{href:"https://www.electronjs.org/docs",target:"_blank",rel:"noopener noreferrer"}},[e._v("官方文档"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://www.electronforge.io",target:"_blank",rel:"noopener noreferrer"}},[e._v("electron-forge 工具"),t("OutboundLink")],1)])]),e._v(" "),t("h3",{attrs:{id:"主进程和渲染进程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#主进程和渲染进程"}},[e._v("#")]),e._v(" 主进程和渲染进程")]),e._v(" "),t("p",[e._v("Electron 运行  "),t("code",[e._v("package.json")]),e._v("  的  "),t("code",[e._v("main")]),e._v("  脚本的进程被称为主进程。一个 Electron 应用总是有且只有一个主进程。主进程使用 BrowserWindow 实例创建页面。每个  "),t("code",[e._v("BrowserWindow")]),e._v("  实例都在自己的渲染进程里运行页面。")]),e._v(" "),t("p",[e._v("如果想在 web 页面里使用 GUI 操作，其对应的渲染进程必须与主进程进行通讯，请求主进程进行相关的 GUI 操作。")]),e._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),t("p",[e._v("不要直接使用 "),t("code",[e._v("nodeIntegration: true")]),e._v(" ，而是要正确使用 preload，这一点极为重要！！！\n指路 stackoverflow："),t("a",{attrs:{href:"https://stackoverflow.com/questions/57807459/how-to-use-preload-js-properly-in-electron",target:"_blank",rel:"noopener noreferrer"}},[e._v("How to use preload.js properly in Electron"),t("OutboundLink")],1)])]),e._v(" "),t("p",[e._v("截止目前通信遇到的问题大多都是没有关联到正确的 view。")]),e._v(" "),t("p",[e._v("另外，主进程或渲染进程不能直接获取到页面内容的信息， "),t("code",[e._v("executeJavascript")]),e._v("  这个 API 也不能直接拷贝 "),t("code",[e._v("window``navigator")]),e._v("  等复杂对象作为结果，最好字符串化， "),t("code",[e._v("executeJavascript")]),e._v("  同样也不能接受使用 "),t("code",[e._v("async/await")]),e._v("  关键字产生的返回结果为 promise 的方法，尤其需要注意。")]),e._v(" "),t("h3",{attrs:{id:"模仿微信开发者工具的手机界面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#模仿微信开发者工具的手机界面"}},[e._v("#")]),e._v(" 模仿微信开发者工具的手机界面")]),e._v(" "),t("p",[e._v("猜测是 BrowserView 内嵌套 iframe 或者 webview，目前使用 webview 成功实现了，但这并不是官方推荐的方式，由于 webview 目前阶段的不稳定性，官方推荐使用 "),t("code",[e._v("Out-of-Process iframes(OOPIFs)")]),e._v(" ，但是我还没搞懂怎么用。")]),e._v(" "),t("p",[e._v("webview 可以与 BrowserView 使用不同的 preload，互不影响。")]),e._v(" "),t("h3",{attrs:{id:"为什么我在render进程取不到remote？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#为什么我在render进程取不到remote？"}},[e._v("#")]),e._v(" 为什么我在 render 进程取不到 remote？")]),e._v(" "),t("p",[t("a",{attrs:{href:"https://stackoverflow.com/questions/37884130/electron-remote-is-undefined",target:"_blank",rel:"noopener noreferrer"}},[e._v("electron-remote-is-undefined"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("需要在对应的 BrowserWindow 或 BrowserView 的 "),t("code",[e._v("webPreferences")]),e._v("  中设置 "),t("code",[e._v("enableRemoteModule")]),e._v("  为 "),t("code",[e._v("true")]),e._v(" ，默认情况下也是开启的")]),e._v(" "),t("p",[e._v("但是 remote 是为了在渲染进程中能够使用主进程模块，这个似乎不太符合主进程渲染进程分离的原则，尽量还是用进程间通信？")]),e._v(" "),t("h3",{attrs:{id:"尚未解决的问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#尚未解决的问题"}},[e._v("#")]),e._v(" 尚未解决的问题")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("electron-forge")]),e._v("  在 windows 平台下引用 electron 的路径不对，开发时可以靠手动改路径绕开问题，但打包路径也是错的，所以会直接报错退出")])]),e._v(" "),t("h3",{attrs:{id:"tips"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tips"}},[e._v("#")]),e._v(" Tips")]),e._v(" "),t("ul",[t("li",[e._v("使用 electron-forge 的情况下，在 start 了开发服务器后可以在终端使用 "),t("code",[e._v("rs")]),e._v("  命令重启 electron 的框架。")])])])}),[],!1,null,null,null);r.default=s.exports}}]);