(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{446:function(t,e,s){},450:function(t,e,s){},455:function(t,e,s){"use strict";var i=s(446);s.n(i).a},457:function(t,e,s){"use strict";var i={name:"Pagination",props:{value:{type:Number,default:1,validator:t=>t>0},total:{type:Number,required:!0,validator:t=>t>0},eachSide:{type:Number,default:1,validator:t=>t>=0}},computed:{firstPage:()=>1,lastPage(){return this.total},onFirstPage(){return this.currentPage===this.firstPage},onLastPage(){return this.currentPage===this.lastPage},currentPage(){return this.value},paginators(){const t=[];if(this.lastPage<2*this.eachSide+4)for(let e=this.firstPage;e<this.lastPage+1;++e)t.push({value:e,enable:!0});else if(this.currentPage-this.firstPage<this.eachSide+2){for(let e=this.firstPage;e<Math.max(2*this.eachSide+1,this.currentPage+this.eachSide+1);++e)t.push({value:e,enable:!0});t.push({value:"...",enable:!1}),t.push({value:this.lastPage,enable:!0})}else if(this.lastPage-this.currentPage<this.eachSide+2){t.push({value:this.firstPage,enable:!0}),t.push({value:"...",enable:!1});for(let e=Math.min(this.lastPage-2*this.eachSide+1,this.currentPage-this.eachSide);e<this.lastPage+1;++e)t.push({value:e,enable:!0})}else{t.push({value:this.firstPage,enable:!0}),t.push({value:"...",enable:!1});for(let e=this.currentPage-this.eachSide;e<this.currentPage+this.eachSide+1;++e)t.push({value:e,enable:!0});t.push({value:"...",enable:!1}),t.push({value:this.lastPage,enable:!0})}return t}},methods:{nextPage(){this.setPage(this.currentPage+1)},prevPage(){this.setPage(this.currentPage-1)},setPage(t){t<=this.lastPage&&t>=this.firstPage&&(this.$emit("input",t),this.$nextTick(()=>{this.$vuepress.updateZoom()}))}}},a=(s(455),s(6)),r=Object(a.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"pagination"},[s("li",{staticClass:"page-item",class:{disabled:t.onFirstPage},on:{click:function(e){return e.preventDefault(),t.prevPage(e)}}},[s("span",[t._v("«")])]),t._v(" "),t._l(t.paginators,(function(e){return s("li",{key:e.value,staticClass:"page-item",class:{active:e.value===t.currentPage,disabled:!e.enable},on:{click:function(s){return s.preventDefault(),t.setPage(e.value)}}},[s("span",[t._v(t._s(e.value))])])})),t._v(" "),s("li",{staticClass:"page-item",class:{disabled:t.onLastPage},on:{click:function(e){return e.preventDefault(),t.nextPage(e)}}},[s("span",[t._v("»")])])],2)}),[],!1,null,"0f024faf",null);e.a=r.exports},470:function(t,e,s){"use strict";var i=s(450);s.n(i).a},472:function(t,e,s){},473:function(t,e,s){},498:function(t,e,s){"use strict";var i=s(2),a=s(435),r=s.n(a),n=s(113),c=s.n(n);const o={},l={};const u={},d={};function h(t){return`${p(Math.floor(t/60))}:${p(Math.floor(t%60))}`}function p(t){return(t=Number(t))!=t?"00":t>9?t:"0"+t}let v=new i.a({data:()=>({id:null})});var m={props:{music:{type:Object,required:!0}},data:()=>({isLoading:!0,info:{},playUrl:"",canPlay:!1,playing:!1,paused:!1,currentTime:0,duration:0,volume:.6,context:null,analyser:null,bufferLength:null,dataArray:null,canvasWidth:256,canvasHeight:20,canvasCtx:null,gradient:null,audio:null,eventBus:v}),computed:{id(){return this.music.id},origin(){return this.music.origin},src(){return`https://music.163.com/song/media/outer/url?id=${this.id}.mp3`},albumPic(){return this.info&&this.info.al&&this.info.al.picUrl},name(){return this.info&&this.info.name||""},artist(){return(this.info&&this.info.ar||[]).map(t=>t.name).join("/")},currentTimeText(){return h(this.currentTime)},durationTimeText(){return h(this.duration)},pacePercent(){return(this.currentTime/this.duration*100).toFixed(2)+"%"}},watch:{"eventBus.id"(t){t!==this._uid&&(this.uniqPlayerIdSeted=!1,this.reset())}},methods:{initAudio(){let t=document.createElement("audio");t.crossOrigin="anonymous",t.oncanplaythrough=()=>{this.canPlay=!0,this.duration=t.duration},t.src=this.playUrl,t.volume=.6,this.audio=t},initAudioContext(){if(this.contextInited)return;AudioContext=AudioContext||webkitAudioContext;let t=this.context=new AudioContext,e=t.createMediaElementSource(this.audio),s=this.analyser=t.createAnalyser();e.connect(s),s.connect(t.destination),s.fftSize=256;let i=this.bufferLength=s.frequencyBinCount;this.dataArray=new Uint8Array(i);this.contextInited=!0},initCanvas(){if(this.canvasInited)return;let{canvasWidth:t,canvasHeight:e}=this,s=this.canvasCtx=this.$refs.canvas.getContext("2d"),i=this.gradient=s.createLinearGradient(0,e,t,e);for(let t=0;t<=5;t++)i.addColorStop(""+.2*t,r()({format:"rgba",alpha:.7}));s.lineWidth=2,this.canvasInited=!0},draw(){this.reqId=requestAnimationFrame(this.draw);let{analyser:t,bufferLength:e,dataArray:s,canvasWidth:i,canvasHeight:a,gradient:r,canvasCtx:n}=this;t.getByteFrequencyData(s),n.clearRect(0,0,i,a),n.beginPath();let c=0,o=.8*e,l=i/o;for(let t=0;t<o;t++){let e=a-s[t]/256*a;0===t?n.moveTo(c,e):n.lineTo(c,e),c+=l}n.strokeStyle=r,n.stroke(),n.closePath()},startDraw(){this.draw()},stopDraw(){this.reqId&&cancelAnimationFrame(this.reqId)},clearDraw(){let{canvasCtx:t,canvasWidth:e,canvasHeight:s}=this;t&&t.clearRect(0,0,e,s)},reset(){this.audio.pause(),this.audio.currentTime=0,this.stopDraw(),this.clearDraw(),this.playing=!1,this.paused=!1},playOrPause(){this.canPlay&&(this.initAudioContext(),this.uniqPlayerIdSeted||(v.id=this._uid,this.uniqPlayerIdSeted=!0),!this.playing||this.paused?(this.playing=!0,this.paused=!1,this.audio.onended=()=>{this.reset()},this.audio.ontimeupdate=t=>{this.currentTime=this.audio.currentTime},this.audio.play(),this.initCanvas(),this.startDraw()):(this.paused=!0,this.audio.pause(),this.stopDraw()))},setProgress({offsetX:t,currentTarget:e}){let s=t/e.clientWidth*this.duration;this.audio.currentTime=s},setVolume(t){this.audio.volume=t,this.volume=t}},mounted(){(function(t=""){if(!t)return Promise.reject();if(o[t])return Promise.resolve(o[t]);if(l[t])return l[t];let e=c.a.get("http://musicapi.leanapp.cn/song/detail",{params:{ids:t}}).then(({status:e,data:s})=>(delete l[t],200==e&&s?(s.songs.forEach(t=>{o[t.id]=t}),Promise.resolve(o[t])):Promise.reject(res)));return l[t]=e,e})(this.id).then(t=>{this.isLoading=!1,this.info=t}),function(t=""){if(!t)return Promise.reject();if(u[t])return Promise.resolve(u[t]);if(d[t])return d[t];let e=c.a.get("http://musicapi.leanapp.cn/music/url?id="+t).then(({status:e,data:s})=>{if(delete d[t],200==e&&s){let e=s.data&&s.data[0];return u[t]=e.url,Promise.resolve(e.url)}return Promise.reject()});return d[t]=e,e}(this.id).then(t=>{this.playUrl=t,this.initAudio()})},beforeDestroy(){this.audio&&(this.audio.pause(),this.stopDraw(),this.audio.oncanplaythrough=null,this.audio.onended=null,this.audio.ontimeupdate=null,this.audio=null)}},f=(s(470),s(6)),g=Object(f.a)(m,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"music-player-wrapper",class:{playing:t.playing,paused:t.paused}},[s("div",{staticClass:"progress-bottom-bar",on:{click:t.setProgress}},[s("div",{staticClass:"progress-pace",style:{width:t.pacePercent}})]),t._v(" "),s("img",{staticClass:"music-album-pic",attrs:{src:t.albumPic,alt:t.name+" - "+t.artist}}),t._v(" "),s("div",{staticClass:"music-info"},[s("div",{staticClass:"music-info-inner"},[s("span",{staticClass:"song-name",attrs:{title:t.name}},[t._v(t._s(t.name))]),t._v(" - "),s("span",{staticClass:"artist-name",attrs:{title:t.artist}},[t._v(t._s(t.artist))]),t._v(" "),s("span",{staticClass:"song-name",attrs:{title:t.name}},[t._v(t._s(t.name))]),t._v(" - "),s("span",{staticClass:"artist-name",attrs:{title:t.artist}},[t._v(t._s(t.artist))])])]),t._v(" "),s("div",{staticClass:"music-operations-wrapper"},[s("div",{staticClass:"music-play-btn",class:{toPause:t.playing&&!t.paused,toPlay:!t.playing||t.paused},on:{click:t.playOrPause}},[s("div",{staticClass:"music-btn-1"}),t._v(" "),s("div",{staticClass:"music-btn-2"})]),t._v(" "),s("div",{staticClass:"progress-bar",style:{width:t.canvasWidth+"px",height:t.canvasHeight+"px"}},[s("canvas",{ref:"canvas",staticClass:"music-wave",attrs:{width:t.canvasWidth,height:t.canvasHeight}}),t._v(" "),s("div",{staticClass:"progress-bar-inner"},[s("div",{staticClass:"progress-text"},[t._v(t._s(t.currentTimeText)+" / "+t._s(t.durationTimeText))])])]),t._v(" "),s("div",{staticClass:"music-volume"},[s("div",{staticClass:"volume-wrapper"},t._l(5,(function(e){var i;return s("div",{key:e,staticClass:"volume-rate",class:(i={},i["rate"+e]=!0,i.covered=t.volume>=(.2*e).toFixed(1),i),on:{click:function(s){return t.setVolume(.2*e)}}})})),0)])])])}),[],!1,null,null,null);e.a=g.exports},511:function(t,e,s){"use strict";var i=s(472);s.n(i).a},512:function(t,e,s){"use strict";var i=s(473);s.n(i).a},540:function(t,e,s){"use strict";s.r(e);var i=s(46),a=s(498),r=s(441),n=s(440),c=s(112),o=s(444),l={name:"RecordsListItem",components:{MusicPlayer:a.a},props:{record:{reqired:!0}},computed:{$frontmatter(){return this.record.frontmatter},$topics(){return this.$frontmatter.topics||[]},timeFromNow(){let{date:t}=this.$frontmatter,e=new Date,s=new Date(t);return Object(n.a)(e,s)<30?Object(r.a)(s,{addSuffix:!0,locale:o.a}):Object(c.a)(s,"yyyy-MM-dd")},date(){let{date:t}=this.$frontmatter,e=new Date(t);return Object(c.a)(e,"yyyy-MM-dd")},extraContent(){return this.record.excerpt}},methods:{focus(t){this.$emit("focusTopic",t)}}},u=(s(511),s(6)),d=Object(u.a)(l,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"records-list-item"},[t._m(0),t._v(" "),s("div",{staticClass:"item-inner"},[s("div",{staticClass:"record-date",attrs:{title:t.date}},[t._v(t._s(t.timeFromNow))]),t._v(" "),t.$topics.length?s("div",{staticClass:"topic-list"},t._l(t.$topics,(function(e){return s("div",{key:e,staticClass:"topic-cell",on:{click:function(s){return t.focus(e)}}},[t._v("#"+t._s(e)+"#")])})),0):t._e(),t._v(" "),t.$frontmatter.music?s("div",{staticClass:"record-music-wrapper"},[s("MusicPlayer",{attrs:{music:t.$frontmatter.music}})],1):t._e(),t._v(" "),s("div",{staticClass:"record-image-wrapper"},t._l(t.$frontmatter.image,(function(t){return s("div",{key:t,staticClass:"record-image-inner"},[s("img",{staticClass:"record-image",attrs:{src:t,"data-original":t}})])})),0),t._v(" "),s("div",{staticClass:"record-content"},[t._v(t._s(t.$frontmatter.content||""))]),t._v(" "),s("div",{staticClass:"record-link"},[t.extraContent?s("RouterLink",{attrs:{to:t.record.path}},[s("span",{staticClass:"record-title-text"},[t._v("更多内容")])]):t._e()],1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"left-link"},[e("div",{staticClass:"left-link-line"}),this._v(" "),e("div",{staticClass:"left-link-dot"})])}],!1,null,"7fdb6330",null).exports,h=s(457),p={name:"RecordsList",components:{TransitionFadeSlide:i.a,RecordsListItem:d,Pagination:h.a},props:{records:{type:Array,required:!1,default:null}},data:()=>({page:1,focusedTopic:null}),computed:{perPage(){return this.$themeConfig.pagination.recordsPerPage||5},total(){return Math.ceil(this.listRecords.length/this.perPage)},listRecords(){let t=this.records||this.$records,{focusedTopic:e}=this;return e?t.filter(t=>(t.frontmatter.topics||[]).includes(e)):t},pageRecords(){const t=(this.page-1)*this.perPage,e=t+this.perPage;return this.listRecords.slice(t,e)}},watch:{listRecords(){this.page=1}},methods:{focusTopic(t){this.focusedTopic=t}},updated(){this.$nextTick(()=>{this.$vuepress.updateZoom()})}},v=(s(512),{components:{RecordsList:Object(u.a)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"records-list"},[s("TransitionFadeSlide",[t.focusedTopic?s("div",{staticClass:"main-div topic-title-wrapper"},[s("div",{staticClass:"topic-title"},[t._v("话题： #"+t._s(t.focusedTopic)+"#")]),t._v(" "),s("div",{staticClass:"clear-and-back",on:{click:function(e){t.focusedTopic=null}}},[t._v("返回")])]):t._e()]),t._v(" "),s("TransitionFadeSlide",[0===t.listRecords.length?s("div",{key:"no-records",staticClass:"no-records"},[t._v("\n            "+t._s(t.$themeConfig.lang.noRelatedRecords)+"\n        ")]):s("div",{key:t.page,staticClass:"records-items"},[s("TransitionFadeSlide",{attrs:{tag:"div",direction:"x",group:""}},t._l(t.pageRecords,(function(e){return s("RecordsListItem",{key:e.path,attrs:{record:e},on:{focusTopic:t.focusTopic}})})),1)],1)]),t._v(" "),t.total>1?s("div",{staticClass:"posts-paginator records-paginator"},[s("Pagination",{attrs:{total:t.total},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1):t._e()],1)}),[],!1,null,"1c91e100",null).exports}}),m=Object(u.a)(v,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"records"},[e("RecordsList",{attrs:{records:this.$records}})],1)}),[],!1,null,null,null);e.default=m.exports}}]);