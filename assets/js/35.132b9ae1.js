(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{430:function(e,t,i){var n={"./locale":425,"./locale.js":425};function s(e){var t=r(e);return i(t)}function r(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}s.keys=function(){return Object.keys(n)},s.resolve=r,e.exports=s,s.id=430},551:function(e,t,i){"use strict";i.r(t);var n=i(429),s=i.n(n);let r=0;var o={name:"VueMermaid",props:{type:{type:String,default:"graph TD"},nodes:{type:Array,required:!0},styles:{type:Array,default:()=>[]},config:{type:Object,default:()=>({})},defaultConfig:{type:Object,default:()=>({theme:"default",startOnLoad:!1,securityLevel:"loose",flowchart:{useMaxWidth:!0}})},stopOnError:{type:Boolean,default:!1},raw:{type:Boolean,default:!1}},data:function(){return{id:r++,edges:[{type:"default",open:"[",close:"]"},{type:"round",open:"(",close:")"},{type:"circle",open:"((",close:"))"},{type:"asymetric",open:">",close:"]"},{type:"rhombus",open:"{",close:"}"}]}},mounted(){this.init(),this.loadNodes()},computed:{nodeObject(){const{nodes:e}=this;if(Array.isArray(e)&&e.length>0){return((e,t)=>Object.assign({},...e.map(e=>({[e[t]]:e}))))(e,"id")}return{}},customStyle(){const{nodes:e,styles:t}=this,i=e.filter(e=>e.style).map(e=>`style ${e.id} ${e.style}`),n=e.filter(e=>e.linkStyle).map(t=>`linkStyle ${t.linkNumber||e.indexOf(t)} ${t.linkStyle}`);return i.concat(t).concat(n)},parseCode(){const{nodes:e,raw:t}=this;if(Array.isArray(e)&&e.length>0){const i=this.type+"\n";let n="";if(t)n=i+e.join(" \n");else{n=i+this.getGroupNodes(e)+this.customStyle.join(" \n")}return this.load(n),console.log(n),n}return""}},methods:{getGroupNodes(e){const t=new Map;return e.forEach(e=>{const i=e.group||"",n=t.get(i)||{nids:new Set,narr:[]};n.nids.add(e.id),n.narr.push(e),t.set(i,n)}),[...t.entries()].map(e=>{const[t,i]=e,{nids:n,narr:s}=i;if(""!==t){const e=[],i=[];return s.forEach(t=>{t.next?(e.push({id:t.id,text:t.text,style:t.style,editable:t.editable}),t.next.forEach(s=>{n.has(s)?e.push({id:t.id,text:t.text,link:t.link,next:[s]}):i.push({id:t.id,text:t.text,link:t.link,next:[s]})})):e.push(t)}),`subgraph ${t} \n ${this.buildNodesStr(e)} end \n ${this.buildNodesStr(i)}`}return this.buildNodesStr(s)}).join(" \n")},buildNodesStr(e){return e.map(e=>e.next&&e.next.length>0?e.next.map((t,i)=>{const n=this.nodeObject[t]||this.nodeObject[t.id];return null!=n&&void 0!==n?`${this.buildNode(e)}${this.buildLink(e,i)}${this.buildNode(n)}`:""+this.buildNode(e)}).join("\n"):""+this.buildNode(e)).join("\n")+"\n"+e.filter(e=>e.editable).map(e=>`click ${e.id} mermaidClick`).join("\n")+"\n"+e.filter(e=>e.url).map(e=>`click ${e.id} "${e.url}"`).join("\n")+"\n"},buildNode(e){let t=e.edgeType?this.edges.find(t=>t.type===e.edgeType):this.edges.find(e=>"default"===e.type);return`${e.id}${t.open}${e.text}${t.close}`},buildLink:(e,t)=>e.link?Array.isArray(e.link)?e.link.length>t?e.link[t]:e.link[e.link.length-1]:e.link:"--\x3e",loadNodes(){this.load(this.parseCode)},init(){const e=this;window.mermaidClick=function(t){e.edit(t)},s.a.initialize(Object.assign(this.defaultConfig,this.config))},load(e){if(e){var t=document.getElementById("mermaid-"+this.id);if(t){t.removeAttribute("data-processed"),t.replaceChild(document.createTextNode(e),t.firstChild);try{s.a.init(e,t)}catch(e){if(this.stopOnError)throw e}}}},edit(e){this.$emit("nodeClick",e)}}},d=i(5),l=Object(d.a)(o,(function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"mermaid",attrs:{id:"mermaid-"+this.id}},[this._v(this._s(this.parseCode))])}),[],!1,null,null,null);t.default=l.exports}}]);